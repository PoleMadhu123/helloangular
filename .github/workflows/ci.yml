name: Angular app deployment

on: 

  push:

    branches: 

      - sample

  pull_request:

    branches: 

      - sample

jobs:

  ubuntu-build:



    runs-on: ubuntu-latest



    strategy:

      matrix:

        node-version: [12.x]



    steps:

    - uses: actions/checkout@v2

    - name: Use Node.js ${{ matrix.node-version }}

      uses: actions/setup-node@v1

      with:

        node-version: ${{ matrix.node-version }}

    - run: npm install

    - run: npm run build

    - run: npm test

      env:

        CI: true

    - name: 'Deploy to Azure Web App'

      uses: azure/webapps-deploy@v1

      with:

        app-name: 'someapp'

        slot-name: 'production'

        publish-profile: ${{ secrets.AzureAppService_PublishProfile}}

        package: .
