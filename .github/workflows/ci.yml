name: Angular app build

on: 
  push:

    branches: 

      - master

  pull_request:

    branches: 

      - master

jobs:

  ubuntu-build:



    runs-on: ubuntu-latest



    strategy:

      matrix:

        node-version: [12.x]



    steps:

    - uses: actions/checkout@v2

    - name: Use Node.js ${{ matrix.node-version }}

      uses: actions/setup-node@v1

      with:

        node-version: ${{ matrix.node-version }}

    - run: npm install

    - run: npm run build
    #- run: npm run lint
    - run: npm test
    
    - name: Send mail
      if: always()
      uses: dawidd6/action-send-mail@v3
      with:
    # mail server settings
        server_address: smtp.gmail.com
        server_port: 465
    # user credentials
        username: ${{ secrets.EMAIL_USERNAME }}
        password: ${{ secrets.EMAIL_PASSWORD }}
    # email subject
        subject: ${{ github.job }} job of ${{ github.repository }} has ${{ job.status }}
    # email body as text
        body: ${{ github.job }} job in worflow ${{ github.workflow }} of ${{ github.repository }} has ${{ job.status }}
    # comma-separated string, send email to
        to: Neha.Katam@henryschein.com,shanmukha.kandula@henryschein.com
    # from email name
        from: Neha Katam

      env:

        CI: true

